# GitHub-Hosted WordPress Embed Instructions

## Problem Solved
Your Svelte app was configured to build as an inline bundle, which WordPress Custom HTML blocks can't handle properly. This solution generates separate JavaScript and CSS files that are automatically served from GitHub's raw file hosting.

## 🚀 Quick Start

### Single Command Setup
```bash
npm run build:embed
```
This command:
- ✅ Builds your Svelte app to the `dist` folder
- ✅ Automatically generates `wordpress-github-embed.html` with correct file URLs
- ✅ No manual file name updates needed!

### Deploy to WordPress
1. **Commit to GitHub**: `git add dist/ wordpress-github-embed.html && git commit -m "Build for WordPress" && git push`
2. **Copy embed code**: Open `wordpress-github-embed.html` and copy all contents
3. **Paste in WordPress**: Add a "Custom HTML" block and paste the code
4. **Done!** Your Svelte app is now embedded and served from GitHub

## 📁 Files Generated

After running `npm run build:embed`:
- `dist/_app/` - Contains all JavaScript and CSS files
- `dist/index.html` - Reference implementation  
- `wordpress-github-embed.html` - **Auto-generated embed code** (ready to use!)

## 🔧 How It Works

The build process automatically:
1. **Builds** your Svelte app with separate files (not inline)
2. **Extracts** file names from the generated `dist/index.html`
3. **Generates** embed code with GitHub raw URLs:
   ```
   https://raw.githubusercontent.com/agwaterdesk/2025-latam-china-trade/refs/heads/main/dist/
   ```
4. **Includes** all required modulepreload links for performance
5. **Handles** errors gracefully with user-friendly messages

## 📋 Example Generated Code

The `wordpress-github-embed.html` file will contain:

```html
<!-- GitHub-Hosted WordPress Embed for Svelte App -->
<link href="https://raw.githubusercontent.com/agwaterdesk/2025-latam-china-trade/refs/heads/main/dist/_app/immutable/assets/2.CCoRCcaN.css" rel="stylesheet">

<link rel="modulepreload" href="https://raw.githubusercontent.com/agwaterdesk/2025-latam-china-trade/refs/heads/main/dist/_app/immutable/entry/start.BeVoA7Tb.js">
<!-- ... more modulepreload links ... -->

<div id="svelte-app-container">
    <div class="demo svelte-vfho01">
        <p>Loading Svelte app...</p>
    </div>
</div>

<script>
(function() {
    const BASE_URL = "https://raw.githubusercontent.com/agwaterdesk/2025-latam-china-trade/refs/heads/main/dist/";
    window.__sveltekit_9jff17 = { base: BASE_URL };
    
    const container = document.getElementById('svelte-app-container');
    
    Promise.all([
        import(BASE_URL + '_app/immutable/entry/start.BeVoA7Tb.js'),
        import(BASE_URL + '_app/immutable/entry/app.Dvvp_APb.js')
    ]).then(([kit, app]) => {
        kit.start(app, container, {
            node_ids: [0, 2],
            data: [null, null],
            form: null,
            error: null
        });
    }).catch(error => {
        console.error('Svelte app failed to load:', error);
        container.innerHTML = '<p>Error loading app. Please check the GitHub repository.</p>';
    });
})();
</script>
```

## 🔄 Workflow

### Making Changes
1. **Edit** your Svelte components
2. **Rebuild**: `npm run build:embed`
3. **Commit**: `git add dist/ wordpress-github-embed.html && git commit -m "Update app" && git push`
4. **Refresh** your WordPress page - changes appear automatically!

### File Updates
- File names change with each build (for cache busting)
- The embed script automatically updates with correct file names
- No manual updates needed

## 🛠️ Troubleshooting

### App Not Loading
1. **Check GitHub**: Verify files exist at the GitHub raw URLs
2. **Browser Console**: Look for CORS or loading errors
3. **Network Tab**: Check if files are loading successfully

### WordPress Issues
1. **Custom HTML Block**: Make sure you're using the correct block type
2. **JavaScript Errors**: Check WordPress isn't stripping script tags
3. **CORS**: GitHub raw files should work without CORS issues

### Build Issues
1. **File Not Found**: Run `npm run build:embed` (not just `npm run build`)
2. **Outdated Files**: The embed file is auto-generated, don't edit manually
3. **GitHub Sync**: Make sure your `dist` folder is pushed to GitHub

## 🎯 Benefits

- ✅ **No file uploads** - Everything served from GitHub
- ✅ **Auto-updating** - File names automatically sync with builds
- ✅ **Performance** - Modulepreload links for faster loading
- ✅ **Error handling** - Graceful fallbacks if files don't load
- ✅ **Cache busting** - File names change with each build
- ✅ **WordPress safe** - Uses external file references, not inline scripts

## 📂 File Structure

```
your-project/
├── dist/                           # Generated by build
│   ├── _app/
│   │   ├── immutable/
│   │   │   ├── assets/
│   │   │   │   └── 2.CCoRCcaN.css
│   │   │   ├── entry/
│   │   │   │   ├── start.BeVoA7Tb.js
│   │   │   │   └── app.Dvvp_APb.js
│   │   │   ├── chunks/
│   │   │   │   ├── DvSKKDzE.js
│   │   │   │   └── [other chunks...]
│   │   │   └── nodes/
│   │   │       ├── 0.C-j4XOSL.js
│   │   │       ├── 1.CxPsmqoD.js
│   │   │       └── 2.DwpewPjO.js
│   │   └── version.json
│   └── index.html
├── wordpress-github-embed.html     # Auto-generated embed code
└── generate-embed.js               # Build script
```

## 🔗 GitHub Repository

Files are served from:
```
https://raw.githubusercontent.com/agwaterdesk/2025-latam-china-trade/refs/heads/main/dist/
```

Make sure your repository is public or the files are accessible for the WordPress site to load them.